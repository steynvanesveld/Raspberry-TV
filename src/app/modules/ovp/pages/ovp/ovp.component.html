<main *ngIf="ovp">
    <div class="container">
        <input
            type="checkbox"
            name="favorites"
            id="favorites"
            [ngClass]="showFavorites ? 'active' : ''"
            [(ngModel)]="showFavorites"
            (change)="routerNavigate()"
        />

        <nav class="navbar" *ngIf="!showFavorites">
            <input
                type="search"
                [(ngModel)]="query"
                (search)="routerNavigate($event)"
                placeholder="Search.."
            />
            <select [(ngModel)]="order" (change)="routerNavigate()">
                <option value="latest">Latest</option>
                <option value="top-rated">Top Rated</option>
                <option value="most-popular">Most Popular</option>
                <option value="top-weekly">Top Weekly</option>
                <option value="top-monthly">Top Monthly</option>
            </select>
        </nav>

        <main
            class="ovp"
            #main
            *ngIf="
                (showFavorites && favoriteVideos.length) ||
                    (!showFavorites && ovp.videos?.length);
                else noResults
            "
        >
            <ng-template [ngTemplateOutlet]="pagination"></ng-template>
            <ng-container
                *ngFor="
                    let video of showFavorites ? favoriteVideos : ovp.videos
                "
            >
                <a
                    *ngIf="video?.current_thumb?.src"
                    (touchstart)="setNewThumbnail(video)"
                    (mouseenter)="setNewThumbnail(video)"
                    (mouseleave)="setDefaultThumbnail(video)"
                    href="/#/ovp/{{ video.id }}?redirect=true"
                    class="video hidden"
                >
                    <button
                        [ngClass]="[
                            'favorite-button',
                            favorites?.favorites?.includes(video.id)
                                ? 'favorite'
                                : ''
                        ]"
                        (click)="setFavorite($event, video)"
                    ></button>
                    <figure>
                        <img
                            [src]="video.current_thumb.src"
                            (load)="showFavoriteButton($event.target)"
                        />
                    </figure>
                    <span>{{ video.title }}</span>
                </a>
            </ng-container>
            <ng-template [ngTemplateOutlet]="pagination"></ng-template>
        </main>

        <ng-template #pagination>
            <ul
                class="ovp-pagination"
                *ngIf="ovp.total_pages > 1 && !showFavorites"
            >
                <li
                    *ngFor="
                        let item of [].constructor(ovp.total_pages);
                        let index = index
                    "
                    [ngClass]="index + 1 === page ? 'active' : ''"
                    (click)="routerNavigate(undefined, index + 1)"
                >
                    {{ index + 1 }}
                </li>
            </ul>
        </ng-template>

        <ng-template #noResults>
            <span class="no-result"> No results..</span>
        </ng-template>
    </div>
</main>
